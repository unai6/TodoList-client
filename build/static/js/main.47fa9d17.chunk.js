(this["webpackJsonptodolist-client"]=this["webpackJsonptodolist-client"]||[]).push([[0],{38:function(e,t,a){},43:function(e,t,a){e.exports=a(93)},48:function(e,t,a){},49:function(e,t,a){},71:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),l=(a(48),a(3)),s=(a(49),a(39)),m=a(6),i=function(){var e=Object(m.g)(),t=Object(n.useState)(!0),a=Object(l.a)(t,2),c=a[0],o=a[1],i=JSON.parse(localStorage.getItem("user")),u=function(){o(!c)};return r.a.createElement("div",null,r.a.createElement(s.slide,{onStateChange:function(e){return function(e){o(e.isOpen)}(e)},className:"userMenu",isOpen:c,disableCloseOnEsc:!0,disableAutoFocus:!0,customBurgerIcon:r.a.createElement("span",{className:"btn-categories"},"CATEGOR\xcdAS")},r.a.createElement("button",{onClick:function(){e.push("/dashboard/".concat(i.userId)),document.location.reload()},onClickCapture:u,className:"menu-item  bm-item btn-handler"},"INICIO"),r.a.createElement("button",{onClick:u,className:"menu-item  bm-item btn-handler"},"MIS TAREAS"),r.a.createElement("button",{onClick:u,className:"menu-item  bm-item btn-handler"},"PENDIENTES"),r.a.createElement("button",{onClick:u,className:"menu-item  bm-item btn-handler"},"COMPLETADAS"),r.a.createElement("button",{onClick:u,className:"menu-item  bm-item btn-handler"},"SUPERMERCADO"),r.a.createElement("button",{onClick:u,className:"menu-item  bm-item btn-handler"},"IMPORTANTES")))},u=a(4),p=a.n(u),d=a(9),b=a(17),E=(a(71),a(41)),f=a.n(E).a.create({baseURL:"".concat("https://todo-list-forines.herokuapp.com")}),g=function(e){return f.post("/signup",e)},h=function(e,t){return f.post("/create-task/".concat(e),t)},v=function(e,t,a){return f.post("/edit-task/".concat(e,"/").concat(t),a)},O=function(){var e=Object(m.g)(),t=Object(b.a)(),a=t.register,c=t.handleSubmit,o=t.errors,s=Object(n.useState)(!0),i=Object(l.a)(s,2)[1],u=Object(n.useState)(""),E=Object(l.a)(u,2),f=E[0],g=E[1],v=Object(n.useState)(["Seleccionar","SuperMercado","Trabajo","Otros"]),O=Object(l.a)(v,2),S=O[0],k=O[1],N=JSON.parse(localStorage.getItem("user")),j=S.map((function(e){return e})),y=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(N.userId,a);case 3:i(!1),e.push("/dashboard/".concat(N.userId)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),g("ya existe un usuario con ese avatar");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"bg-component"},r.a.createElement("div",{className:"div-createTask"},r.a.createElement("form",{onSubmit:c(y)},o.name&&r.a.createElement("span",null," ",o.name.message?o.name.message:"Este campo es obligatorio"," "),r.a.createElement("span",null,f),r.a.createElement("input",{className:"form-control",name:"name",type:"text",placeholder:"Nombre",ref:a({required:!0})}),o.category&&r.a.createElement("span",null," ",o.category.message?o.nickName.message:"Este campo es obligatorio"," "),r.a.createElement("div",null,r.a.createElement("label",null,"Categor\xeda",r.a.createElement("select",{name:"category",className:"form-control",ref:a({required:!0}),onChange:function(e){k(j)}},j.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),o.description&&r.a.createElement("span",null," ",o.description.message?o.description.message:"Este campo es obligatorio"," "),r.a.createElement("input",{className:"form-control",name:"description",type:"text",ref:a({required:!0}),placeholder:"Descripci\xf3n"}),r.a.createElement("button",null,"Crear tarea"))))},S=(a(38),a(7)),k=a(42),N=a.n(k),j=a(25),y=function(e){var t=Object(b.a)(),a=t.register,c=t.handleSubmit,o=t.errors,s=Object(n.useState)(!1),m=Object(l.a)(s,2),i=m[0],u=m[1],E=Object(n.useState)(""),g=Object(l.a)(E,2)[1],h=Object(n.useState)([]),O=Object(l.a)(h,2),k=O[0],y=O[1],x=Object(n.useState)(""),w=Object(l.a)(x,2),I=w[0],C=w[1],A=Object(n.useState)(["Seleccionar","SuperMercado","Trabajo","Otros"]),R=Object(l.a)(A,2),T=R[0],M=R[1],q=Object(n.useState)(""),L=Object(l.a)(q,2),D=L[0],U=L[1],W=T.map((function(e){return e})),J=Object(n.useState)(!1),P=Object(l.a)(J,2),G=P[0],_=P[1];Object(n.useEffect)((function(){(function(){var t=Object(d.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=e.match.params.userId,f.get("/userinfo/".concat(n));case 2:a=t.sent,g(a.data),y(a.data.tasks);case 5:case"end":return t.stop()}var n}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.match.params.userId,G]);var F=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v(e.match.params.userId,I._id,a);case 3:_(!0),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),U("Lo sentimos, No se puede actualizar esta tarea");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"bg-component","data-test":"app-component"},r.a.createElement(S.b,{to:"/create-task/".concat(e.match.params.userId)},r.a.createElement("button",{className:"btn-create-task"}," + NUEVA TAREA")),r.a.createElement("div",{className:"div-tasks"},r.a.createElement("div",{className:"d-flex justify-content-between mb-3"},r.a.createElement("span",{className:"tasks-headers"},"\xdaLTIMAS TAREAS"),r.a.createElement("span",{className:"tasks-headers"},"FECHA DE CREACI\xd3N")),k.map((function(e,t){return r.a.createElement("div",{key:t,className:"d-flex justify-content-between"},r.a.createElement("div",{className:"task-name p-2",onClick:function(){return function(e){u(!0),C(e)}(e)}}," ",e.completed?r.a.createElement("del",null,r.a.createElement("span",{className:!1===e.completed?"text-danger":!0===e.completed?"text-success":"Trabajo"!==e.category&&"Supermercado"!==e.category||!0!==e.important||!1!==e.completed?e.category&&!0===!e.important&&!1===e.completed==="Supermercado"?"text-dark":null:"text-info"},e.name)):r.a.createElement("span",{className:!1===e.completed?"text-danger":!0===e.completed?"text-success":"Trabajo"!==e.category&&"Supermercado"!==e.category||!0!==!e.important?e.category&&"Supermercado"===!e.importantes?"text-dark":null:"text-info"},e.name),r.a.createElement("span",{className:!1===e.completed?"text-danger":!0===e.completed?"text-success":"Trabajo"!==e.category&&"Supermercado"!==e.category||!0!==!e.important?e.category&&"Supermercado"===!e.importantes?"text-dark":null:"text-info"},r.a.createElement("i",{className:"fas fa-circle ball-state"}))),r.a.createElement("div",null,r.a.createElement("span",{className:"date"},r.a.createElement(N.a,{format:"D MMM YYYY"},e.createdAt))))})),r.a.createElement("div",{className:"vertical-lign"})),I?r.a.createElement(j.a,{show:i,onHide:function(){u(!1)}},r.a.createElement(j.a.Body,null,r.a.createElement("form",{onSubmit:c(F)},o.name&&r.a.createElement("span",null," ",o.name.message?o.name.message:"Este campo es obligatorio"," "),r.a.createElement("span",null,D),r.a.createElement("input",{className:"form-control",name:"name",type:"text",placeholder:"Nombre",ref:a({required:!0})}),o.category&&r.a.createElement("span",null," ",o.category.message?o.nickName.message:"Este campo es obligatorio"," "),r.a.createElement("div",null,r.a.createElement("label",null,"Categor\xeda",r.a.createElement("select",{name:"category",className:"form-control",ref:a({required:!0}),onChange:function(e){M(W)}},W.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),o.description&&r.a.createElement("span",null," ",o.description.message?o.description.message:"Este campo es obligatorio"," "),r.a.createElement("input",{className:"form-control",name:"description",type:"text",ref:a({required:!0}),placeholder:"Descripci\xf3n"}),r.a.createElement("button",null,"Actualizar")))):null)},x=(a(92),function(){var e,t=localStorage.getItem("user");return null!==t&&(e=JSON.parse(t)),r.a.createElement("div",{className:"background-home"},r.a.createElement(S.b,{to:"/signup"},r.a.createElement("button",null,"Registrarse")),r.a.createElement(r.a.Fragment,null,t?r.a.createElement(S.b,{to:"/dashboard/".concat(e.userId)},r.a.createElement("button",null,"Ir a mi escritorio")," "):r.a.createElement(S.b,{to:"/login"},r.a.createElement("button",null,"Iniciar Sesi\xf3n")," ")))}),w=Object(n.createContext)(),I=function(){var e=Object(b.a)(),t=e.register,a=e.handleSubmit,c=Object(n.useContext)(w).authenticate;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:a((function(e){c(e)}))},r.a.createElement("input",{className:"form-control",name:"nickName",type:"text",placeholder:"NickName",ref:t({required:!0})}),r.a.createElement("input",{className:"form-control",name:"password",type:"password",placeholder:"password",ref:t({required:!0})}),r.a.createElement("input",{className:"form-control",type:"checkbox",name:"remember",ref:t}),r.a.createElement("button",null,"Acceder en mi cuenta")))},C=function(){var e=Object(m.g)(),t=Object(b.a)(),a=t.register,c=t.handleSubmit,o=t.errors,s=Object(n.useState)(!0),i=Object(l.a)(s,2),u=i[0],E=i[1],f=Object(n.useState)(""),h=Object(l.a)(f,2),v=h[0],O=h[1],S=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(a);case 3:E(!1),e.push("/login"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),O("ya existe un usuario con ese avatar");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:c(S)},o.name&&r.a.createElement("span",null," ",o.name.message?o.name.message:"Este campo es obligatorio"," "),r.a.createElement("span",null,v),r.a.createElement("input",{className:"form-control",name:"name",type:"text",placeholder:"Nombre",ref:a({required:!0})}),o.nickName&&r.a.createElement("span",null," ",o.nickName.message?o.nickName.message:"Este campo es obligatorio"," "),r.a.createElement("input",{className:"form-control",name:"nickName",type:"text",ref:a({required:!0}),placeholder:"Avatar"}),o.password&&r.a.createElement("span",null," ",o.password.message?o.password.message:"Este campo es obligatorio"," "),r.a.createElement("input",{className:"form-control",name:"password",type:"text",ref:a({required:!0}),placeholder:"Contrase\xf1a"}),r.a.createElement("input",{type:"checkbox",name:"remember",ref:a}),u?r.a.createElement("button",null,"Registrarse"):r.a.createElement("p",null,"Gracias por registrate")))},A=a(20),R=function(e,t){switch(t.type){case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.data.token),localStorage.setItem("user",JSON.stringify(t.payload.data.user)),Object(A.a)(Object(A.a)({},e),{},{token:t.payload.token,user:t.payload.user,loading:!1});case"LOGIN_ERROR":return localStorage.removeItem("token"),localStorage.removeItem("user"),Object(A.a)(Object(A.a)({},e),{},{token:null,user:null,message:t.payload,loading:!1});default:return e}},T=function(e){var t={user:localStorage.getItem("user"),token:localStorage.getItem("token"),loading:!0},a=Object(m.g)(),c=Object(n.useReducer)(R,t),o=Object(l.a)(c,2),s=o[0],i=o[1];return r.a.createElement(w.Provider,{value:{token:s.token,user:s.user,loading:s.loading,authenticate:function(e){(function(e){return f.post("/login",e)})(e).then((function(e){i({type:"LOGIN_SUCCESS",payload:e}),a.push("/dashboard/".concat(e.data.user.userId)),document.location.reload()})).catch((function(e){i({type:"LOGIN_ERROR",payload:e})}))}}},e.children)},M=a(21),q=function(e){var t=Object(n.useContext)(w),a=e.component,c=Object(M.a)(e,["component"]);return r.a.createElement(r.a.Fragment,null,t.token?r.a.createElement(m.a,{to:"/"}):r.a.createElement(m.b,Object.assign({render:function(e){return r.a.createElement(a,e)}},c)))},L=function(e){var t=e.component,a=Object(M.a)(e,["component"]),n=localStorage.getItem("token");return r.a.createElement(r.a.Fragment,null,n?r.a.createElement(m.b,Object.assign({render:function(e){return r.a.createElement(t,e)}},a)):r.a.createElement(m.a,{to:"/"}))},D=function(e){e?f.defaults.headers.common.Authorization=e:delete f.defaults.headers.common.Authorization};function U(e){var t=localStorage.getItem("token");return t&&D(t),r.a.createElement(S.a,null,r.a.createElement(T,null,r.a.createElement(m.d,null,r.a.createElement(q,{path:"/",exact:!0,component:x}),r.a.createElement(q,{path:"/signup",component:C}),r.a.createElement(q,{path:"/login",component:I}),r.a.createElement(L,{path:"/dashboard/:userId",component:y}),r.a.createElement(L,{path:"/create-task/:userId",component:O}))))}var W=function(){var e=JSON.parse(localStorage.getItem("user"));return r.a.createElement("div",{"data-test":"app-component"},r.a.createElement("button",{className:"btn-logout d-block ml-auto mb-4 mr-2 mt-2",onClick:function(){return localStorage.removeItem("user"),localStorage.removeItem("token"),document.location.reload(),r.a.createElement(m.a,{to:"/"})}},"[ Cerrar Sesi\xf3n ]"),r.a.createElement("div",null,r.a.createElement("img",{className:"logo",src:"/list-2389219_640-removebg-preview.png",alt:"pic","data-test":"image-logo"}),r.a.createElement("h2",{className:"h2-name"},"Hola ",e.nickName)))},J=function(e){var t=Object(n.useState)(localStorage.getItem("token")),a=Object(l.a)(t,1)[0],c=Object(n.useState)(!1),o=Object(l.a)(c,2),s=o[0],m=o[1];return Object(n.useEffect)((function(){a&&m(!0)}),[a,s]),r.a.createElement(S.a,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a?r.a.createElement(W,null):null,r.a.createElement("div",null,a?r.a.createElement(i,null):null,r.a.createElement("div",null,r.a.createElement(U,null)))))},P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");P?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):G(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):G(t,e)}))}}()}},[[43,1,2]]]);
//# sourceMappingURL=main.47fa9d17.chunk.js.map